<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.85.0" />
    <meta name="description" content="This website provides the support for the class Programming tools in data science given at the Faculty of Business and Economics (HEC Lausanne) of the University of Lausanne in Fall (currently 2021)">
<meta name="author" content="Samuel Orso">

    <link rel="shortcut icon" href="https://www.unil.ch/favicon.ico" type="image/x-icon" />
<link rel="icon" href="https://www.unil.ch/favicon.ico" type="image/x-icon" />

    <title>R Coding Style Guide :: Programming tools for data science</title>

    
    <link href="/css/nucleus.css?1636712690" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1636712690" rel="stylesheet">
    <link href="/css/hybrid.css?1636712690" rel="stylesheet">
    <link href="/css/featherlight.min.css?1636712690" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1636712690" rel="stylesheet">
    <link href="/css/auto-complete.css?1636712690" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1636712690" rel="stylesheet">
    <link href="/css/theme.css?1636712690" rel="stylesheet">
    <link href="/css/hugo-theme.css?1636712690" rel="stylesheet">
    
      <link href="/css/theme-green.css?1636712690" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1636712690"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
    <script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$','$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    }
  };

  window.addEventListener('load', (event) => {
      document.querySelectorAll("mjx-container").forEach(function(x){
        x.parentElement.classList += 'has-jax'})
    });

</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-176152424-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
  </head>
  <body class="" data-url="/tutorials/style/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">
	<img src="https://raw.githubusercontent.com/SMAC-Group/ptds2018_website/master/data/hec_logo_white.png" alt="hec_logo" height="80" width="155">
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1636712690"></script>
<script type="text/javascript" src="/js/auto-complete.js?1636712690"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/ptds.samorso.ch\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1636712690"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/syllabus/" title="Syllabus" class="dd-item 
        
        
        
        ">
      <a href="/syllabus/">
          Syllabus
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/syllabus/general/" title="General information" class="dd-item ">
        <a href="/syllabus/general/">
        General information
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/syllabus/coursedescr/" title="Course description" class="dd-item ">
        <a href="/syllabus/coursedescr/">
        Course description
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/syllabus/grading/" title="Grading" class="dd-item ">
        <a href="/syllabus/grading/">
        Grading
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/syllabus/communication/" title="Communication" class="dd-item ">
        <a href="/syllabus/communication/">
        Communication
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/syllabus/material/" title="Material" class="dd-item ">
        <a href="/syllabus/material/">
        Material
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/syllabus/final/" title="Convinced?" class="dd-item ">
        <a href="/syllabus/final/">
        Convinced?
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/lectures/" title="Lectures" class="dd-item 
        
        
        
        ">
      <a href="/lectures/">
          Lectures
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/lectures/additional/" title="Supplementary material" class="dd-item ">
        <a href="/lectures/additional/">
        Supplementary material
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/tutorials/" title="Tutorials" class="dd-item 
        parent
        
        
        ">
      <a href="/tutorials/">
          Tutorials
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/tutorials/r_install/" title="R/RStudio installation and setup" class="dd-item ">
        <a href="/tutorials/r_install/">
        R/RStudio installation and setup
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/tutorials/style/" title="R Coding Style Guide" class="dd-item active">
        <a href="/tutorials/style/">
        R Coding Style Guide
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/tutorials/workflow/" title="Project-oriented workflow" class="dd-item ">
        <a href="/tutorials/workflow/">
        Project-oriented workflow
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/tutorials/logistic/" title="Logistic regression" class="dd-item ">
        <a href="/tutorials/logistic/">
        Logistic regression
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/homeworks/" title="Homeworks" class="dd-item 
        
        
        
        ">
      <a href="/homeworks/">
          Homeworks
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/homeworks/schedule/" title="Schedule" class="dd-item ">
        <a href="/homeworks/schedule/">
        Schedule
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/homeworks/hw0/" title="homework #0" class="dd-item ">
        <a href="/homeworks/hw0/">
        homework #0
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/homeworks/hw1/" title="homework #1" class="dd-item ">
        <a href="/homeworks/hw1/">
        homework #1
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/homeworks/hw1-sol/" title="homework #1 solutions" class="dd-item ">
        <a href="/homeworks/hw1-sol/">
        homework #1 solutions
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/homeworks/hw2/" title="homework #2" class="dd-item ">
        <a href="/homeworks/hw2/">
        homework #2
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/homeworks/hw3/" title="homework #3" class="dd-item ">
        <a href="/homeworks/hw3/">
        homework #3
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/project/" title="Project" class="dd-item 
        
        
        
        ">
      <a href="/project/">
          Project
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/project/output/" title="Project" class="dd-item ">
        <a href="/project/output/">
        Project
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/project/proposal/" title="Proposal" class="dd-item ">
        <a href="/project/proposal/">
        Proposal
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/group/" title="Groups" class="dd-item 
        
        
        
        ">
      <a href="/group/">
          Groups
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/group/groups/" title="Composition" class="dd-item ">
        <a href="/group/groups/">
        Composition
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/resources/" title="Resources" class="dd-item 
        
        
        
        ">
      <a href="/resources/">
          Resources
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/ptds2020/"><i class='fab fa-github'></i> Github repo</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://shiny.samorso.ch/fillingform/"><i class='fa fa-fw fa-users'></i> Discussion forum</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://smac-group.github.io/ds/"><i class='fa fa-fw fa-book'></i> Lectures</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Programming tools in data science</a> > <a href='/tutorials/'>Tutorials</a> > R Coding Style Guide
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#introduction">Introduction</a></li>
        <li><a href="#naming">Naming</a></li>
        <li><a href="#syntax">Syntax</a></li>
        <li><a href="#comments">Comments</a></li>
        <li><a href="#other-recommendations">Other recommendations</a></li>
        <li><a href="#references">References</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              R Coding Style Guide
            </h1>
          

        



<blockquote>
<p>Good coding style is like using correct punctuation. You can manage without
it, but it sure makes things easier to read.
<!-- raw HTML omitted --> Hadley Wickham <!-- raw HTML omitted --></p>
</blockquote>
<h3 id="introduction">Introduction</h3>
<p>A language is a tool that allows human beings to interact and communicate with each other. The clearer we express ourselves, the better an idea is transferred from our mind to the other. The same applies to programming languages: concise, clear and consistent codes are easier to read and/or edit. It is especially important, if you have collaborators, who depend on your code. However, even if you don&rsquo;t, keep in mind that at some point in time, you might come back to your code, for example, to fix an error. And if you did not follow consistently your coding style, reviewing your code can take much longer, than you expected. In this context, taking care of your audience means to make your code as readable as possible.</p>
<p>There is no such thing as a &ldquo;correct&rdquo; coding style, as there is no such thing as the best color. At the end of the day, the coding style is a set of developers' preferences. If you are coding alone, sticking to your coding style and being consistent is more than enough. The story is a bit different if you are working in a team: it is crucial to agree on a convention beforehand and make sure that everyone follows it.</p>
<!-- raw HTML omitted -->
<p>Even though there is no an official style guide, R is mature and steady enough to have an &ldquo;unofficial&rdquo; convention. In this tutorial, you will learn these &ldquo;unofficial&rdquo; rules, their deviations, and most common styles.</p>
<h3 id="naming">Naming</h3>
<h4 id="naming-files">Naming files</h4>
<p>The convention actually depends on whether you develop a file for a package, or as a part of data analysis process. There are, however, <strong>common rules</strong>:</p>
<ul>
<li>
<p>File names should use <code>.R</code> extension.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good
read.R

# Bad 
read
</code></pre></div></li>
<li>
<p>File names should be meaningful.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
model.R

# Bad
Untitled1.R
</code></pre></div></li>
<li>
<p>File names should not contain <code>/</code> and spaces. Instead, a dash (<code>-</code>) or underscore (<code>_</code>) should be used.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
fir_regression.R
fir-regression.R

# Bad
fit regression.R
</code></pre></div></li>
</ul>
<p>If the file is <strong>a part of the data analysis</strong>, then it makes sense to follow the following recommendations:</p>
<ul>
<li>
<p>File names should be lowercase. There is nothing bad in having capital case names, just bear in mind UNIX systems are case insensitive, meaning that <code>test.R</code> and <code>Test.R</code> do not differ.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good
analyse.R

# Bad
Analyse.R
</code></pre></div></li>
<li>
<p>Use meaningful verbs for file names.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
validate-vbm.R

# Bad
regression.R
</code></pre></div></li>
<li>
<p>If files should be run in a particular order, then use ascending names.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">01-read.R
02-clean.R
02-plot.R
</code></pre></div></li>
</ul>
<p>If the file is used <strong>in a pacakge</strong>, than slightly different rules should be taken care of:</p>
<ul>
<li>
<p>Mind special names:</p>
<ul>
<li><code>AllClasses.R</code> (or <code>AllClass.R</code>), a file that stores all S4 classes definitions.</li>
<li><code>AllGenerics.R</code> (or <code>AllGeneric.R</code>), a file that stores all S4 generic functions.</li>
<li><code>zzz.R</code>, a file that contains <code>.onLoad()</code> and friends.</li>
</ul>
</li>
<li>
<p>If the file contains only one function, name it by the function name.</p>
</li>
<li>
<p>Use <code>methods-</code> prefix for S4 class methods.</p>
</li>
</ul>
<h4 id="naming-variables">Naming variables</h4>
<ul>
<li>
<p>Generally, names should be as short as possible, still meaningful nouns.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
fit_rt
split_1
imdb_page

# Bad
fit_regression_tree
cross_validation_split_one
foo
</code></pre></div></li>
<li>
<p>Variable names should be typically lowercase.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
event

# Bad 
Event
</code></pre></div></li>
<li>
<p>NEVER separate words within the name by <code>.</code> (reserved for an S3 dispatch) or use CamelCase (reserved for S4 classes definitions). Instead, use an underscore (<code>_</code>).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
event_window

# Bad 
event.window
EventWindow
</code></pre></div></li>
<li>
<p>DO NOT use names of existing function and variables (especially, built-in ones).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Bad
T &lt;- 10 # T is a shortcut of TRUE in R
c &lt;- &#34;constant&#34;
</code></pre></div></li>
</ul>
<h4 id="naming-functions">Naming functions</h4>
<p>Many points of naming variables are similar for naming functions:</p>
<ul>
<li>
<p>Generally, function names should be verbs.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good
add()

# Bad
addition()
</code></pre></div></li>
<li>
<p>Use <code>.</code> ONLY for dispatching S3 generic.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
bw_test()

# Bad
bw.test()
</code></pre></div></li>
<li>
<p>Add the underscore (<code>_</code>) prefix to a standard evaluation (SE) equivalent of a function (<code>summrize</code> vs <code>sumarize_</code> ).</p>
</li>
</ul>
<h4 id="naming-s4-classes">Naming S4 classes</h4>
<p>Class names should be nouns in CamelCase with initial capital case letter.</p>
<h3 id="syntax">Syntax</h3>
<h4 id="line-length">Line length</h4>
<p>The maximum length of lines is limited to 80 characters (thanks to IBM Punch Card).</p>
<p>It is possible to display the margin in RStudio Source editor:</p>
<ul>
<li>Go to Tools -&gt; Global Options&hellip; -&gt; Code -&gt; Display</li>
<li>Click on &ldquo;Show margin&rdquo;</li>
<li>Set &ldquo;Margin column&rdquo; to 80</li>
</ul>
<!-- raw HTML omitted -->
<h4 id="spacing">Spacing</h4>
<ul>
<li>
<p>Put spaces around all infix binary operators (<code>=</code>, <code>+</code>, <code>*</code>, <code>==</code>, <code>&amp;&amp;</code>, <code>&lt;-</code>, <code>%*%</code>, etc.).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
x == y
a &lt;- a ^ 2 + 1

# Bad
x==y
a&lt;-a^2+1
</code></pre></div></li>
<li>
<p>Put spaces around &ldquo;=&rdquo; in function calls (except for Bioconductor).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
mean(x = c(1, NA, 2), na.rm = TRUE)

# Bad
mean(x=c(1, NA, 2), na.rm=TRUE)
</code></pre></div></li>
<li>
<p>Do NOT place space for subsetting (<code>$</code> and <code>@</code>), namespace manipulation (<code>::</code> and <code>:::</code>), and for sequence generation (<code>:</code>).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
car$cyl
dplyr::select
1:10

# Bad
car $cyl
dplyr:: select
1: 10
</code></pre></div></li>
<li>
<p>Put a space after a coma:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
mtcars[, &#34;cyl&#34;]
mtcars[1, ]
mean(x = c(1, NA, 2), na.rm = TRUE)

# Bad
mtcars[,&#34;cyl&#34;]
mtcars[1 ,]
mean(x = c(1, NA, 2),na.rm = TRUE)
</code></pre></div></li>
<li>
<p>Use a space before left parentheses, except in a function call.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
for (element in element_list)
if (grade == 5.5)
sum(1:10)

# Bad
for(element in element_list)
if(grade == 5.5)
sum (1:10)
</code></pre></div></li>
<li>
<p>No spacing around code in parenthesis or square brackets.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
if (debug) message(&#34;debug mode&#34;)
species[&#34;tiger&#34;, ]

# Bad
if ( debug ) message(&#34;debug mode&#34;)
species[ &#34;tiger&#34; ,]
</code></pre></div></li>
</ul>
<h4 id="curly-braces">Curly braces</h4>
<ul>
<li>
<p>An opening curly brace should NEVER go on its own line and should always be followed by a new line.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
if (is_used) {
    # do something
}

if (is_used) {
    # do something
} else {
    # do something else
}

# Bad
if (is_used)
{
    # do something
}

if (is_used) { # do something }
else { # do something else }

</code></pre></div></li>
<li>
<p>A closing curly brace should always go on its own line, unless it’s followed by else.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
if (is_used) {
    # do something
} else {
    # do something else
}

# Bad
if (is_used) {
    # do something
}
else {
    # do something else 
}

</code></pre></div></li>
<li>
<p>Always indent the code inside curly braces (see next section).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
if (is_used) {
    # do something
    # and then something else
}

# Bad
if (is_used) {
# do something
# and then something else
}
</code></pre></div></li>
<li>
<p>Curly braces and new lines can avoided, if a statement after <code>if</code> is very short.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
if (is_used) return(rval)
</code></pre></div></li>
</ul>
<h4 id="indentation">Indentation</h4>
<p>ALWAYS indent your code!</p>
<ul>
<li>
<p>No tabs or mixes of tabs and spaces.</p>
</li>
<li>
<p>There are two common number of spaces for indentation: two (Hadley and others) and four (Bioconductor). My own rule of thumb: I use four spaces indentation for data analyses scripts, and two spaces while developing packages.</p>
</li>
<li>
<p>Choose the number of spaces of indentation up-front and stick to it. Never mix different number of spaces in one project.</p>
</li>
<li>
<p>To set the number of spaces of the project, go to Tools -&gt; Global options&hellip; -&gt; Code -&gt; Editing. Check the following boxes: &ldquo;Insert spaces for tab&rdquo; (with &ldquo;Tab width&rdquo; equal to chosen number), &ldquo;Auto-indent code after paste&rdquo;, and &ldquo;Vertically align arguments in auto-indent&rdquo;.</p>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>Magic shortcut: <code>Command+I</code> (<code>Ctrl+I</code> for Windows/Linux) will indent a selected chunk of code. Together with <code>Command+A</code> (select all) it is a very powerful tool, which saves time.</li>
</ul>
<p>Try a little exercise: paste the following code in your RStudio source editor, select it, and hit <code>Command+I</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">for(i in 1:10) {
if(i %% 2 == 0)
print(paste(i, &#34;is even&#34;))
}
</code></pre></div><h4 id="new-line">New line</h4>
<ul>
<li>
<p>Very often a function definition does not fit into one line. In this case, excessive arguments should be moved to a new line, starting from the opening parenthesis.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">long_function_name &lt;- function(arg1, arg2, arg3, arg4, 
                               long_argument_name1 = TRUE)
</code></pre></div></li>
<li>
<p>If arguments expand more than into two lines, than each argument should be placed on a separate line.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">long_function_name &lt;- function(long_argument_name1 = c(&#34;value1&#34;, &#34;value2&#34;),
                               long_argument_name2 = TRUE,
                               long_argument_name3 = NULL,
                               long_argument_name4 = FALSE)
</code></pre></div></li>
<li>
<p>The same applies to a function call: excessive arguments should be indented where the closing parenthesis is located, if only two lines are sufficient.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">plot(table(rpois(100, 5)), type = &#34;h&#34;, col = &#34;red&#34;, lwd = 10, 
     main = &#34;rpois(100, lambda = 5)&#34;)
</code></pre></div></li>
<li>
<p>Otherwise, each argument can go into a separate line, starting from a new line after the opening parenthesis.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">list(
    mean = mean(x),
    sd = sd(x),
    var = var(x),
    min = min(x),
    max = max(x),
    median = median(x)
)
</code></pre></div></li>
<li>
<p>If the condition in <code>if</code> statement expands into several lines, than each condition should end with a logical operator, NOT start with it.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good
if (some_very_long_name_1 == 1 &amp;&amp;
    some_very_long_name_2 == 1 ||
    some_very_long_name_3 %in% some_very_long_name_4)

# Bad
if (some_very_long_name_1 == 1
    &amp;&amp; some_very_long_name_2 == 1
    || some_very_long_name_3 %in% some_very_long_name_4)
</code></pre></div><p>I know some people who are completely against it. See the next bullet why I believe it is better.</p>
</li>
<li>
<p>If the statement, which contains operators, expands into several lines, than each line should end with an operator, not start with it. Sometimes, it makes sense to split a formula into meaningful chunks.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
normal_pdf &lt;- 1 / sqrt(2 * pi * d_sigma ^ 2) *
    exp(-(x - d_mean) ^ 2 / 2 / s ^ 2)

# Bad
normal_pdf &lt;- 1 / sqrt(2 * pi * d_sigma ^ 2)
    * exp(-(x - d_mean) ^ 2 / 2 / d_sigma ^ 2)
</code></pre></div><p>Not only it is ugly, but also syntactically wrong. In the second case, R will consider these two lines as two distinct statements: the first line will assign the value of <code>1 / sqrt(2 * pi * d_sigma ^ 2)</code> to <code>normal_pdf</code>, and the second line will throw an error, since <code>*</code> does not have the first argument.</p>
</li>
<li>
<p>Each grammar statement of <code>dplyr</code> (after <code>%&gt;%</code>) and <code>ggplot2</code> (after <code>+</code>) should start from a new line.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">mtcars %&gt;%
    filter(cyl == 4) %&gt;% 
    group_by(am) %&gt;% 
    summarize(avg_mpg = mean(mpg))

ggplot(mtcars) + 
    geom_point(aes(x = mpg, y = qsec, color = factor(am))) + 
    geom_line(aes(x = mpg, y = qsec, color = factor(am)))
</code></pre></div></li>
</ul>
<h3 id="comments">Comments</h3>
<ul>
<li>
<p>Comment your code. Always. Your collaborators and future-you will be very grateful. Comments starts by <code>#</code> followed by space and actual comment.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># This is a comment. 
</code></pre></div></li>
<li>
<p>Comments should explain the why, not the what. Comments should not replicate the code by a plain langue, but rather explain the overall intention of the command.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good
# define iterator
i &lt;- 1

# Bad
# set i to 1
i &lt;- 1
</code></pre></div></li>
<li>
<p>Short comments can be placed after code preceded by one space, <code>#</code>, and then one space.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">plot(price, weight) # plot a scatter chart of price and weight
</code></pre></div></li>
<li>
<p>To comment/uncomment selected chunk, use <code>Command+Shift+C</code>.</p>
</li>
<li>
<p>Use <code>roxygen2</code> comments for a package development (i.e., <code>#'</code>) to comment functions.</p>
</li>
<li>
<p>It makes sense to split the source into logical chunks by <code>#</code> followed by <code>-</code> or <code>=</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Read data
#---------------------------------------------------------------------------

# Tidy data
#---------------------------------------------------------------------------

</code></pre></div></li>
</ul>
<h3 id="other-recommendations">Other recommendations</h3>
<ul>
<li>
<p>Use <code>&lt;-</code> for assignment, NOT <code>=</code>.</p>
</li>
<li>
<p>Use <code>library()</code> instead of <code>require()</code>, unless it is a conscious choice. Package names should be characters (avoid NSE - non-standard evaluation).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good
library(&#34;dplyr&#34;)

# Bad
require(dplyr)
</code></pre></div></li>
<li>
<p>In a function call, arguments can be specified by position, by complete name, or by partial name. Never specify by partial name and never mix by position and by complete name.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good 
mean(x, na.rm = TRUE)
rnorm(10, 0.2, 0.3)

# Bad
mean(x, na = TRUE)
rnorm(mean = 0.2, 10, 0.3)
</code></pre></div></li>
<li>
<p>While developing a package, specify arguments by name.</p>
</li>
<li>
<p>The required (with no default value) arguments should be first, followed by optional arguments.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good
raise_to_power(x, power = 2.7)

# Bad
raise_to_power(power = 2.7, x)
</code></pre></div></li>
<li>
<p>The <code>...</code> argument should either be in the beginning, or in the end.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good
standardize(..., scale = TRUE, center = TRUE)
save_chart(chart, file, width, height, ...)

# Bad
standardize(scale = TRUE, ..., center = TRUE)
save_chart(chart, ..., file, width, height)
</code></pre></div></li>
<li>
<p>Good practice is to set default arguments inside the function using <code>NULL</code> idiom, and avoid dependence between arguments:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good
histogram &lt;- function(x, bins = NULL) {
    if (is.null(bins)) bins &lt;- nclass.Sturges(x)
    ...
}

# Bad
histogram &lt;- function(x, bins = nclass.Sturges(x)) {
    ...
}
</code></pre></div></li>
<li>
<p>Always validate arguments in a function.</p>
</li>
<li>
<p>While developing a package, specify the namespace of each used function, except if it is from <code>base</code> package.</p>
</li>
<li>
<p>Do NOT put more than one statement (command) per line. Do NOT use semicolon as termination of the command.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"># Good
x &lt;- 1
x &lt;- x + 1

# Bad 
x &lt;- 1; x &lt;- x + 1
</code></pre></div></li>
<li>
<p>Avoid using <code>setwd(&quot;/Users/irudnyts/path/that/only/I/have&quot;)</code>. Almost surely your collaborators will have different paths, which makes the project not portable. Instead, use <code>here::here()</code> function from <code>here()</code> package (for details see next tutorial).</p>
</li>
<li>
<p>Avoid using <code>rm(list = ls())</code>. This statement delets all objects from the global enviroment, and gives you an illusion of a fresh R start (for details see next tutorial).</p>
</li>
</ul>
<p>If you have read until this moment, you deserve a prize. There is a magic key combination <code>Command+Shift+A</code> that reformats selected code: add spaces and indent it. Do not use it exessively though!</p>
<h3 id="references">References</h3>
<ul>
<li><a href="http://adv-r.had.co.nz/Style.html">Advanced R</a></li>
<li><a href="https://google.github.io/styleguide/Rguide.xml">Google&rsquo;s R Style Guide</a></li>
<li><a href="http://bioconductor.org/developers/how-to/coding-style/">Bioconductor Coding Style</a></li>
<li><a href="https://csgillespie.github.io/efficientR/coding-style.html">Efficient R programming</a></li>
<li><a href="https://csgillespie.wordpress.com/2010/11/23/r-style-guide/">Colin Gillespie’s R style guide</a></li>
<li><a href="https://journal.r-project.org/archive/2012-2/RJournal_2012-2_Baaaath.pdf">The State of Naming Conventions in R</a></li>
<li><a href="https://www.r-bloggers.com/consistent-naming-conventions-in-r/">Consistent naming conventions in R</a></li>
<li><a href="https://www.tidyverse.org/articles/2017/12/workflow-vs-script/">Project-oriented workflow</a></li>
<li>Picture is taken from <a href="https://www.facebook.com/Rmemes0/">R Memes For Statistical Fiends</a> Facebook page.</li>
</ul>


<footer class="footline">
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/tutorials/r_install/" title="R/RStudio installation and setup"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/tutorials/workflow/" title="Project-oriented workflow" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1636712690"></script>
    <script src="/js/perfect-scrollbar.min.js?1636712690"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1636712690"></script>
    <script src="/js/jquery.sticky.js?1636712690"></script>
    <script src="/js/featherlight.min.js?1636712690"></script>
    <script src="/js/highlight.pack.js?1636712690"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1636712690"></script>
    <script src="/js/learn.js?1636712690"></script>
    <script src="/js/hugo-learn.js?1636712690"></script>

    <link href="/mermaid/mermaid.css?1636712690" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1636712690"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

